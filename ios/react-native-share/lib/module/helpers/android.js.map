{"version":3,"names":["PermissionsAndroid","NativeRNShare","getAndroidVersion","checkAndroidPermissionsForUrls","urls","Promise","all","map","url","isBase64File","includes","checkExternalStoragePermission","WRITE_EXTERNAL_STORAGE","PERMISSIONS","granted","check","isAndroidVersionAtLeastKitKat","result","request","RESULTS","GRANTED","Error"],"sources":["android.ts"],"sourcesContent":["import { PermissionsAndroid } from 'react-native';\n\nimport NativeRNShare from '../../codegenSpec/NativeRNShare';\nimport { getAndroidVersion } from './platform';\n\nexport async function checkAndroidPermissionsForUrls(urls: string[]) {\n  // Reference: https://github.com/react-native-share/react-native-share/pull/871\n  if ((await Promise.all(urls.map((url) => NativeRNShare.isBase64File(url)))).includes(true)) {\n    await checkExternalStoragePermission();\n  }\n}\n\nasync function checkExternalStoragePermission() {\n  const { WRITE_EXTERNAL_STORAGE } = PermissionsAndroid.PERMISSIONS;\n\n  const granted = await PermissionsAndroid.check(WRITE_EXTERNAL_STORAGE);\n\n  if (!granted) {\n    if (!isAndroidVersionAtLeastKitKat()) {\n      const result = await PermissionsAndroid.request(WRITE_EXTERNAL_STORAGE);\n      if (result !== PermissionsAndroid.RESULTS.GRANTED) {\n        throw new Error('Write Permission not available');\n      }\n    }\n  }\n}\n\nfunction isAndroidVersionAtLeastKitKat() {\n  return getAndroidVersion() >= 19;\n}\n"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,cAAc;AAEjD,OAAOC,aAAa,MAAM,iCAAiC;AAC3D,SAASC,iBAAiB,QAAQ,YAAY;AAE9C,OAAO,eAAeC,8BAA8BA,CAACC,IAAc,EAAE;EACnE;EACA,IAAI,CAAC,MAAMC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,GAAG,CAAEC,GAAG,IAAKP,aAAa,CAACQ,YAAY,CAACD,GAAG,CAAC,CAAC,CAAC,EAAEE,QAAQ,CAAC,IAAI,CAAC,EAAE;IAC1F,MAAMC,8BAA8B,CAAC,CAAC;EACxC;AACF;AAEA,eAAeA,8BAA8BA,CAAA,EAAG;EAC9C,MAAM;IAAEC;EAAuB,CAAC,GAAGZ,kBAAkB,CAACa,WAAW;EAEjE,MAAMC,OAAO,GAAG,MAAMd,kBAAkB,CAACe,KAAK,CAACH,sBAAsB,CAAC;EAEtE,IAAI,CAACE,OAAO,EAAE;IACZ,IAAI,CAACE,6BAA6B,CAAC,CAAC,EAAE;MACpC,MAAMC,MAAM,GAAG,MAAMjB,kBAAkB,CAACkB,OAAO,CAACN,sBAAsB,CAAC;MACvE,IAAIK,MAAM,KAAKjB,kBAAkB,CAACmB,OAAO,CAACC,OAAO,EAAE;QACjD,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;MACnD;IACF;EACF;AACF;AAEA,SAASL,6BAA6BA,CAAA,EAAG;EACvC,OAAOd,iBAAiB,CAAC,CAAC,IAAI,EAAE;AAClC"}